# 参考
[Prometheus使用手册](https://wiki.amovlab.com/public/prometheus-wiki/)

# 升级cmake版本
[备忘录 linux升级cmake(3.13.2) - 高隽睿志的文章 - 知乎](https://zhuanlan.zhihu.com/p/348384801)

# Prometheus文件夹下运行全部编译脚本报错
![d9b5030527d4f16365be2011e529d5b](https://github.com/Travis-ovo/UAV/assets/102942951/d253bb1b-30e1-4049-88df-6a9ed4d8d24e)
- 解决
  安装multi_map_server的ROS插件 `sudo apt-get install ros-melodic-multi-map-server`
- 另外Prometheus包放在home下

# Prometheus代码框架
![Screenshot from 2023-07-07 16-26-22](https://github.com/Travis-ovo/UAV/assets/102942951/558291a7-2e5a-47ef-852a-0e8c19784c4f)

- Modules: 各模块功能的源代码
- Simulator: 仿真飞行相关代码
- Experiment: 真实飞行相关代码

# PX4编译环境配置及固件代码安装
Prometheus项目中的Gazebo仿真模块依赖PX4固件及sitl_gazebo包，因此需先配置PX4编译环境。
![Screenshot from 2023-07-07 18-31-09](https://github.com/Travis-ovo/UAV/assets/102942951/1fcec2f2-1422-4788-b914-a42ca55e7969)

## git tag报错
怀疑可能是clone github导致标签不匹配, 更换为clone gitee到本地, 再重复编译流程即可

## 编译通过了, 但model迟迟无法加载
- 问题就是网络问题, 需要把~/prometheus_px4/Tools/models中的所有文件复制到~/.gazebo/models文件夹中
- 注意.gazebo文件夹是隐藏文件夹, 按ctrl+h即可
- .gazebo中如果没有models文件夹就创建一个, 然后复制进去即可

# 编译成功效果图
久违的成功, 途中遇到大大小小问题还是很折磨人的, 做到这里先给自己点个赞ovo!  
(注: 无人机太黑了可能看不到)  

![Screenshot from 2023-07-18 15-28-51](https://github.com/Travis-ovo/UAV/assets/102942951/ca7dcf4b-813d-4e90-83cb-1aba83279f65)

# Prometheus_mavros安装问题
## ./install_prometheus_mavros.sh命令报错
![Screenshot from 2023-07-19 10-36-32](https://github.com/Travis-ovo/UAV/assets/102942951/21338911-ab1d-42ff-8114-8059f0412a06)  
如上图, 报错信息为: Error: the following packages/stacks could not have their rosdep keys resolved to system dependencyies  
实际上就是缺少依赖包, 在终端中输入
```
sudo apt-get install ros-[ROS版本]-缺少的依赖包
```
比如说我这里显然缺少cmake_modules和control_toolbox, 那么在终端依次输入
```
sudo apt-get install ros-melodic-cmake-modules
sudo apt-get install ros-melodic-control-toolbox
```
注意: "_"换成"-"
